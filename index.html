<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Catch The Love ‚ù§Ô∏è</title>

<style>
body{
margin:0;
overflow:hidden;
font-family:Arial;
background:linear-gradient(180deg,#ff4d6d,#8b0033);
color:white;
text-align:center;
}

/* Start Screen */
#start{
position:fixed;
inset:0;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
background:black;
z-index:10;
}

/* Game Area */
#game{
position:fixed;
inset:0;
}

/* Basket */
#basket{
position:absolute;
bottom:20px;
font-size:55px;
}

/* Hearts */
.heart{
position:absolute;
font-size:32px;
}

/* LEFT MISS COUNTER */
#missBox{
position:fixed;
top:20px;
left:20px;
font-size:22px;
}

/* RIGHT CATCH COUNTER */
#catchBox{
position:fixed;
top:20px;
right:20px;
font-size:22px;
}

/* Final Screen */
#final{
display:none;
position:fixed;
inset:0;
background:black;
justify-content:center;
align-items:center;
flex-direction:column;
}

#final img{
width:80%;
max-width:380px;
border-radius:25px;
box-shadow:0 0 60px pink;
}
</style>
</head>

<body>

<!-- START -->
<div id="start">
<h1>‚ù§Ô∏è Catch The Love ‚ù§Ô∏è</h1>
<p>Catch 15 Hearts To Win</p>
<button onclick="startGame()">Start</button>
</div>

<!-- LEFT MISS -->
<div id="missBox">Miss ‚ùå: <span id="miss">0</span></div>

<!-- RIGHT CATCH -->
<div id="catchBox">Catch üíñ: <span id="catch">0</span></div>

<!-- GAME -->
<div id="game">
<div id="basket">üß∫</div>
</div>

<!-- FINAL -->
<div id="final">
<h2>‚ù§Ô∏è YOU + ME ‚ù§Ô∏è</h2>
<img src="couple.jpeg">
</div>

<script>

let basket=document.getElementById("basket");

let catchScore=0;
let missScore=0;
let target=15;

let gameLoop;

/* MOVE BASKET */
document.addEventListener("mousemove",move);
document.addEventListener("touchmove",(e)=>{
move(e.touches[0]);
});

function move(e){
basket.style.left=(e.clientX-40)+"px";
}

/* START GAME */
function startGame(){
document.getElementById("start").style.display="none";
gameLoop=setInterval(spawnHeart,700);
}

/* SPAWN HEART */
function spawnHeart(){

let heart=document.createElement("div");
heart.className="heart";
heart.innerHTML="üíñ";

heart.style.left=Math.random()*window.innerWidth+"px";
heart.style.top="-40px";

document.getElementById("game").appendChild(heart);

let caught=false;

/* FALL */
let fall=setInterval(()=>{

heart.style.top=(heart.offsetTop+4)+"px";

/* CATCH */
if(collide(basket,heart)){
caught=true;
catchScore++;
updateUI();
heart.remove();
clearInterval(fall);
checkWin();
}

/* MISS */
if(heart.offsetTop>window.innerHeight){
if(!caught){
missScore++;
updateUI();
}
heart.remove();
clearInterval(fall);
}

},16);
}

/* UPDATE UI */
function updateUI(){
document.getElementById("catch").innerText=catchScore;
document.getElementById("miss").innerText=missScore;
}

/* COLLISION */
function collide(a,b){
let ar=a.getBoundingClientRect();
let br=b.getBoundingClientRect();

return !(
ar.top>br.bottom ||
ar.bottom<br.top ||
ar.right<br.left ||
ar.left>br.right
);
}

/* WIN */
function checkWin(){
if(catchScore>=target){
winGame();
}
}

function winGame(){
clearInterval(gameLoop);
document.getElementById("final").style.display="flex";
startFireworks();
}

/* FIREWORKS */
function startFireworks(){
let canvas=document.createElement("canvas");
document.body.appendChild(canvas);

canvas.width=innerWidth;
canvas.height=innerHeight;

let ctx=canvas.getContext("2d");

setInterval(()=>{
ctx.fillStyle="rgba(0,0,0,.2)";
ctx.fillRect(0,0,canvas.width,canvas.height);

for(let i=0;i<8;i++){
ctx.fillStyle=`hsl(${Math.random()*360},100%,70%)`;
ctx.beginPath();
ctx.arc(Math.random()*canvas.width,
Math.random()*canvas.height,
2+Math.random()*4,0,6.28);
ctx.fill();
}
},40);
}

</script>

</body>
</html>
